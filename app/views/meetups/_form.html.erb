<head>
  <script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>

</head>
<%= form_for(@meetup) do |f| %>
  <% if @meetup.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@meetup.errors.count, "error") %> prohibited this meetup from being saved:</h2>

      <ul>
      <% @meetup.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br>
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :user_id %><br>
    <%= f.text_field :user_id %>
  </div>
  <div class="field">
    <%= f.label :disc %><br>
    <%= f.text_area :disc %>
  </div>
  <div class="field">

    <%= f.label :lat %><br>
    <%= f.hidden_field :lat , :value => 5 %>
    
     
  </div>
  <div class="field">
    <%= f.label :long %><br>
    <%= f.hidden_field :lat , :value => 5 %>

   
    <%= f.hidden_field :lat %>
  </div>
  <div class="field">
   
    <%= f.hidden_field :long %>
     <%= f.label :country %><br>
       <%= f.text_field :country  %>

  </div>
  
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>



<script>
var x = document.getElementById("demo");

function getLocation() {

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>


<script >
var x = document.getElementById("meetup_lat");
var y = document.getElementById("meetup_long");
var z = document.getElementById("meetup_country");

  z.onchange = function(){


var address = z.value;
var geocoder = new google.maps.Geocoder();

geocoder.geocode( { 'address': address}, function(results, status) {
  var location = results[0].geometry.location;
  x.value = location.lat();
    y.value = location.lng();

});

  };


   if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }

}

function showPosition(position) {
    x.innerHTML = "Latitude: " + position.coords.latitude + 
    "<br>Longitude: " + position.coords.longitude;	
}
</script>

   // z.setAttribute("onChange", ch());

function showPosition(position) {
  console.log("hi");

  console.log(position.coords.latitude);
    x.value = position.coords.latitude ;
    y.value = position.coords.longitude ;
    console.log(position.coords.longitude);
   // console.log(geoplugin_city());
   console.log(geoplugin_countryName());
    z.innerHTML = geoplugin_countryName() ;
    z.value = geoplugin_countryName() ;


}
</script>

